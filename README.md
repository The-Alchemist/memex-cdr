# Crawl Data Repository (CDR) Reference Implementation

## Introduction

This is a proposal of a reference implementation for the CDR schema.
This implementation provides:
- A class for representation of the CDR schema
- Default metadata and content extractions using Apache Tika
- A builder class for CDR objects with validation
- JSON serialization of objects

## Use cases

- Use in production for generation and serialization of objects
- Extraction of default metadata and textual content
- Validation of objects generated by third part implementations

## API usage

### Creating a CDR document

```java
String json = new CrawlDataBuilder()
                    .withUrl("http://www.darpa.mil/program/memex")
                    .withRawContent(content)
                    .withContentType("text/html")
                    .withCrawler("memex-crawler")
                    .withTeam("DARPA")
                    .withTimestamp(new Date().getTime())
                    .buildAsJson();
```

The output variable `json` will contain a JSON representation for valid CDR object, including metadata and textual content extracted.

Sample output in JSON format:

```json
{
  "url": "http://www.darpa.mil/program/memex",
  "timestamp": 1437838711410,
  "team": "DARPA",
  "crawler": "memex-crawler",
  "raw_content": "<raw html here>",
  "content_type": "text/html",
  "content": "<plain text extracted from raw_content here>",
  "metadata": {
    "Content-Style-Type": "text/css",
    "image": "/DDM_Gallery/(2ab4) i2o feature 3 - memex - 287x228_thumb.jpg",
    "X-Parsed-By": "org.apache.tika.parser.DefaultParser",
    "REVISIT-AFTER": "1 DAYS",
    "title": "Memex (Domain-Specific Search)",
    "ROBOTS": "INDEX, FOLLOW",
    "X-UA-Compatible": "IE=edge",
    "RATING": "GENERAL",
    "viewport": "width=device-width, initial-scale=1",
    "dc:title": "Memex (Domain-Specific Search)",
    "Content-Encoding": "UTF-8",
    "Content-Type-Hint": "text/html; charset=UTF-8",
    "COPYRIGHT": "Copyright 2015 by DARPA",
    "Content-Script-Type": "text/javascript",
    "Topic": "Cyber",
    "RESOURCE-TYPE": "DOCUMENT",
    "Content-Type": "text/html; charset=UTF-8"
  },
  "crawl_data": null
}
``` 